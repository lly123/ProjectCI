<!DOCTYPE html>
<html lang="en">
<head>
    <title>ILDS Project Status</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/angular.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        angular.module('bookApp', [], function($locationProvider)
        {
            $locationProvider.html5Mode(true);
        });

        Ctrl = function($scope, $window)
        {
            $scope.reportPerson = 'Liyan';
            $scope.reportType = 'UserStory';

            $scope.parseReportDateStr = function()
            {
                return Date.parse($scope.reportDateStr);
            }
        }
    </script>
</head>
<body ng-app="bookApp" ng-init='[MODEL_DATA]' ng-controller="Ctrl">
    <div class="container">
        <div class="row-fluid">
            <div class="span9" style="text-align: center">
                <h1><a href="/">ILDS Project Status</a></h1>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span9">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="span3">Team Valuable Activity</th>
                            <th class="span2">Effort</th>
                            <th>Time Slot</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>User Story Development</td>
                            <td>{{userStory.usedEffort}} / {{userStory.totalEffort}}</td>
                            <td>
                                <div class="progress progress-success progress-striped">
                                    <div class="bar" ng-style="{'width': ((userStory.usedEffort / userStory.totalEffort) * 100) + '%'}"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>High Level Design</td>
                            <td>
                                <div class="progress progress-success progress-striped">
                                    <div class="bar" style="width: 0%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>QSA Work</td>
                            <td>
                                <div class="progress progress-success progress-striped">
                                    <div class="bar" style="width: 0%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Performance Testing</td>
                            <td>
                                <div class="progress progress-success progress-striped">
                                    <div class="bar" style="width: 0%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Integration Testing</td>
                            <td>
                                <div class="progress progress-success progress-striped">
                                    <div class="bar" style="width: 0%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>iiNet</td>
                            <td>
                                <div class="progress progress-success progress-striped">
                                    <div class="bar" style="width: 0%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Document (Deployment)</td>
                            <td>
                                <div class="progress progress-success progress-striped">
                                    <div class="bar" style="width: 0%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Document (User Guide)</td>
                            <td>
                                <div class="progress progress-success progress-striped">
                                    <div class="bar" style="width: 0%"></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <a href="#addReport" role="button" class="btn btn-info" data-toggle="modal">Add Report</a>
            </div>
        </div>

        <form class="form-horizontal" action="/report/create" method="post">
            <input type="hidden" name="report_date" value="{{parseReportDateStr()}}"/>

            <div id="addReport" class="modal hide fade" tabindex="-1" role="dialog">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3>Add Report</h3>
                </div>
                <div class="modal-body">
                    <div class="control-group">
                        <label class="control-label" for="reportDate">Report Date</label>
                        <div class="controls">
                            <input type="text" id="reportDate" ng-model="reportDateStr" placeholder="Report Date" required/>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Person</label>
                        <div class="controls">
                            <input type="hidden" name="report_person" value="{{reportPerson}}"/>
                            <div class="btn-group">
                                <button class="btn btn-info">{{reportPerson}}</button>
                                <button class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a tabindex="-1" href="#" ng-click="reportPerson='Liyan'">Liyan</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportPerson='Shaobo'">Shaobo</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportPerson='LiBin'">LiBin</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportPerson='XuWei'">XuWei</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportPerson='Jack'">Jack</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportPerson='Jacky'">Jacky</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportPerson='Nancy'">Nancy</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Report Type</label>
                        <div class="controls">
                            <input type="hidden" name="report_type" value="{{reportType}}"/>
                            <div class="btn-group">
                                <button class="btn btn-info">{{reportType}}</button>
                                <button class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a tabindex="-1" href="#" ng-click="reportType='UserStory'">UserStory</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportType='HighLevelDesign'">HighLevelDesign</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportType='DeploymentDoc'">DeploymentDoc</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportType='UserGuideDoc'">UserGuideDoc</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportType='QSA'">QSA</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportType='PerformanceTesting'">PerformanceTesting</a></li>
                                    <li><a tabindex="-1" href="#" ng-click="reportType='IntegrationTesting'">IntegrationTesting</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="hours">Hours</label>
                        <div class="controls">
                            <input type="text" id="hours" name="report_hours" placeholder="Hours" required/>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="comment">Comment</label>
                        <div class="controls">
                            <input type="text" id="comment" name="report_comment" placeholder="Comment" required/>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" type="submit">Add</button>
                    <button class="btn" data-dismiss="modal">Close</button>
                </div>
            </div>
        </form>
    </div>
</body>
</html>